[package]
name = "oxc_ast_tools"
version = "0.0.0"
edition.workspace = true
license.workspace = true
publish = false

[lints]
workspace = true

[[bin]]
name = "oxc_ast_tools"
test = true
doctest = false

[dependencies]
# These dependencies are only used by JS generators.
# So make them optional, and only enable them if `generate-js` feature is enabled.
# See comment on `js-generators` feature below.
#
# `features = ["serialize"]` on `oxc_span` and `oxc_syntax` is needed to work around a bug in `oxc_index`.
oxc_allocator = { workspace = true, optional = true }
oxc_ast = { workspace = true, optional = true }
oxc_ast_visit = { workspace = true, optional = true }
oxc_codegen = { workspace = true, optional = true }
oxc_minifier = { workspace = true, optional = true }
oxc_parser = { workspace = true, optional = true }
oxc_span = { workspace = true, features = ["serialize"], optional = true }
oxc_syntax = { workspace = true, features = ["serialize"], optional = true }

oxc_data_structures = { workspace = true, features = ["slice_iter"] }

bitflags = { workspace = true }
bpaf = { workspace = true, features = ["autocomplete", "bright-color", "derive"] }
convert_case = { workspace = true }
cow-utils = { workspace = true }
indexmap = { workspace = true }
itertools = { workspace = true }
lazy-regex = { workspace = true }
oxc_index = { workspace = true }
phf = { workspace = true, features = ["macros"] }
phf_codegen = { workspace = true }
prettyplease = { workspace = true }
proc-macro2 = { workspace = true }
quote = { workspace = true }
rayon = { workspace = true }
rustc-hash = { workspace = true }
serde = { workspace = true, features = ["derive"] }
serde_json = { workspace = true }
syn = { workspace = true, features = ["clone-impls", "derive", "extra-traits", "full", "parsing", "printing", "proc-macro"] }
toml = { workspace = true }

[features]
default = ["generate-js"]
# Feature to enable JS generators that require `oxc_*` crates.
# Enabled by default, but can be disabled to break the circular dependency
# when AST changes prevent local crates from compiling.
# See: https://github.com/oxc-project/oxc/issues/15564
generate-js = [
  "dep:oxc_allocator",
  "dep:oxc_ast",
  "dep:oxc_ast_visit",
  "dep:oxc_codegen",
  "dep:oxc_minifier",
  "dep:oxc_parser",
  "dep:oxc_span",
  "dep:oxc_syntax",
]
