name: Update lint_rules list

on: push
# on:
#   pull_request:
#     branches:
#       - main
#     types:
#       - closed

jobs:
  lint_rules:
    # if: github.event.pull_request.merged == true && contains(github.event.pull_request.labels.*.name, 'A-linter')
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Branch
        uses: actions/checkout@v4

      - name: Install Rust
        uses: moonrepo/setup-rust@v1 # Cache everything to speed up compilation
        with:
          cache-base: main

      - name: Build lint_rules task
        run: cargo build -p lint_rules

      - name: eslint(debug)
        run: cargo run -p lint_rules eslint

      - name: eslint
        run: cargo run -p lint_rules eslint --update
